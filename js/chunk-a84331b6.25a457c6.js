(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a84331b6"],{"2f99":function(t,e,n){"use strict";n("a6ce")},5652:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container py-5"},[n("AdminNav"),n("form",{staticClass:"my-4"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"col-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newCategory,expression:"newCategory"}],staticClass:"form-control",attrs:{type:"text",placeholder:"新增餐廳類別..."},domProps:{value:t.newCategory},on:{input:function(e){e.target.composing||(t.newCategory=e.target.value)}}})]),n("div",{staticClass:"col-auto"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addCategory(t.newCategory)}}},[t._v(" 新增 ")])])])]),n("table",{staticClass:"table"},[t._m(0),n("tbody",t._l(t.categories,(function(e){return n("tr",{key:e.id},[n("th",{attrs:{scope:"row"}},[t._v(" "+t._s(e.id)+" ")]),n("td",{staticClass:"position-relative"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditing,expression:"!category.isEditing"}],staticClass:"category-name"},[t._v(" "+t._s(e.name)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:e.isEditing,expression:"category.isEditing"},{name:"model",rawName:"v-model",value:e.name,expression:"category.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.isEditing,expression:"category.isEditing"}],staticClass:"cancel",on:{click:function(n){return t.handleCancel(e.id)}}},[t._v(" ✕ ")])]),n("td",{staticClass:"d-flex justify-content-between"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isEditing,expression:"!category.isEditing"}],staticClass:"btn btn-link mr-2",attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.toggleIsEditing(e.id)}}},[t._v(" Edit ")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.isEditing,expression:"category.isEditing"}],staticClass:"btn btn-link mr-2",attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.updateCategory({categoryId:e.id,name:e.name})}}},[t._v(" Save ")]),n("button",{staticClass:"btn btn-link mr-2",attrs:{type:"button"},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.deleteCategory(e.id)}}},[t._v(" Delete ")])])])})),0)])],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-dark"},[n("tr",[n("th",{attrs:{scope:"col",width:"60"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("Category Name")]),n("th",{attrs:{scope:"col",width:"210"}},[t._v("Action")])])])}],i=n("5530"),s=n("1da1"),o=(n("96cf"),n("d81d"),n("4de4"),n("d3b7"),n("b0c0"),n("e04c")),c=n("dad4"),u=n.n(c),d=n("be6c"),l=n("2fa3"),g={components:{AdminNav:o["a"]},data:function(){return{categories:[],newCategory:"",isProcessing:!1}},created:function(){this.fetchCategories()},methods:{fetchCategories:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].categories.get();case 3:if(n=e.sent,"OK"===n.statusText){e.next=6;break}throw new Error;case 6:t.categories=n.data.categories.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{isEditing:!1,nameCached:""})})),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),l["a"].fire({icon:"error",title:"無法取得餐廳類別資訊，請稍後再試"}),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},addCategory:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,e.newCategory){n.next=4;break}return l["a"].fire({icon:"warning",title:"請填寫欲新增之餐廳類別"}),n.abrupt("return");case 4:return e.isProcessing=!0,n.next=7,d["a"].categories.create({name:e.newCategory});case 7:if(r=n.sent,a=r.data,console.log(a),"error"!==a.status){n.next=12;break}throw new Error(a.message);case 12:e.categories.push({id:u()(),name:e.newCategory,createdAt:new Date,updatedAt:new Date}),e.isProcessing=!1,l["a"].fire({icon:"success",title:"成功新增".concat(t,"餐廳類別")}),e.newCategory="",n.next=23;break;case 18:n.prev=18,n.t0=n["catch"](0),console.log(n.t0),e.isProcessing=!1,l["a"].fire({icon:"error",title:"無法新增餐廳類別--".concat(n.t0.message)});case 23:case"end":return n.stop()}}),n,null,[[0,18]])})))()},deleteCategory:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d["a"].categories.delete({categoryId:t});case 3:r=n.sent,console.log(r),e.categories=e.categories.filter((function(e){return e.id!==t})),l["a"].fire({icon:"success",title:"成功刪除此餐廳類別"}),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0),l["a"].fire({icon:"error",title:"無法刪除此餐廳類別，請稍後再試"});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},toggleIsEditing:function(t){console.log("clcik"),this.categories=this.categories.map((function(e){return e.id===t?Object(i["a"])(Object(i["a"])({},e),{},{isEditing:!e.isEditing,nameCached:e.name}):e}))},updateCategory:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.categoryId,a=t.name,n.prev=1,n.next=4,d["a"].categories.update({categoryId:r,name:a});case 4:i=n.sent,console.log(i),e.toggleIsEditing(r),l["a"].fire({icon:"success",title:"成功更新此餐廳類別"}),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](1),console.log(n.t0),l["a"].fire({icon:"error",title:"無法更新此餐廳類別，請稍後再試"});case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},handleCancel:function(t){this.categories=this.categories.map((function(e){return e.id===t?Object(i["a"])(Object(i["a"])({},e),{},{isEditing:!e.isEditing,name:e.nameCached}):e}))}}},m=g,p=(n("2f99"),n("2877")),f=Object(p["a"])(m,r,a,!1,null,"7804e03c",null);e["default"]=f.exports},"59ee":function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var a=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}},a6ce:function(t,e,n){},be6c:function(t,e,n){"use strict";n("b0c0");var r=n("2fa3");e["a"]={users:{get:function(){return r["b"].get("/admin/users")},update:function(t){var e=t.userId,n=t.isAdmin;return r["b"].put("/admin/users/".concat(e),{isAdmin:n})}},categories:{get:function(){return r["b"].get("/admin/categories")},create:function(t){var e=t.name;return r["b"].post("/admin/categories",{name:e})},update:function(t){var e=t.categoryId,n=t.name;return r["b"].put("/admin/categories/".concat(e),{name:n})},delete:function(t){var e=t.categoryId;return r["b"].delete("/admin/categories/".concat(e))}},restaurants:{create:function(t){var e=t.formData;return r["b"].post("/admin/restaurants",e)},get:function(){return r["b"].get("/admin/restaurants")},getDetail:function(t){var e=t.restaurantId;return r["b"].get("/admin/restaurants/".concat(e))},delete:function(t){var e=t.restaurantId;return r["b"].delete("/admin/restaurants/".concat(e))},update:function(t){var e=t.restaurantId,n=t.formData;return r["b"].put("/admin/restaurants/".concat(e),n)}}}},d81d:function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde"),s=i("map");r({target:"Array",proto:!0,forced:!s},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},dad4:function(t,e,n){var r=n("59ee"),a=n("e1f7");function i(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var o=0;o<16;++o)e[i+o]=s[o];return e||a(s)}t.exports=i},e04c:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-3"},[n("h1",[t._v("餐廳後台")]),n("router-link",{attrs:{to:"/admin/restaurants"}},[t._v("Restaurants")]),t._v(" | "),n("router-link",{attrs:{to:"/admin/categories"}},[t._v("Categories")]),t._v(" | "),n("router-link",{attrs:{to:"/admin/users"}},[t._v("Users")])],1)},a=[],i=n("2877"),s={},o=Object(i["a"])(s,r,a,!1,null,null,null);e["a"]=o.exports},e1f7:function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);function a(t,e){var r=e||0,a=n;return[a[t[r++]],a[t[r++]],a[t[r++]],a[t[r++]],"-",a[t[r++]],a[t[r++]],"-",a[t[r++]],a[t[r++]],"-",a[t[r++]],a[t[r++]],"-",a[t[r++]],a[t[r++]],a[t[r++]],a[t[r++]],a[t[r++]],a[t[r++]]].join("")}t.exports=a}}]);
//# sourceMappingURL=chunk-a84331b6.25a457c6.js.map